<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex">
    
    <title>An Aidoku source list</title>
    <meta name="description" content="A source list for use with Aidoku.">

    <meta name="theme-color" content="#ff375f">
    <link rel="icon" href="https://aidoku.app/images/favicon-32x32.png">

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.5.2/cdn/themes/light.css"
      integrity="sha384-0usmJJJTG5wZwRFlxdECle5gNAqtRYVm8rHBHjGO0+Cpgp83KTGEANVIFUYafjaO"
      crossorigin="anonymous"
    />

    <script
      async
      type="module"
      src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.5.2/cdn/shoelace-autoloader.js"
      integrity="sha384-ILzDiPYY4je5i95gGzpVe0e88rFqVnoz3i7HPBsRbtEHxfkA7wR8E+PwjCgt1Bin"
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.12.3/dist/cdn.min.js"
      integrity="sha384-mPO6U7t0sNHfI1UIWNf5U6FDzprqWgAMKfOGW86JVGCKoU/7HPdy6DwBaWOsi4eV"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <header class="header">
      <p class="header__title">An Aidoku source list</p>
      <sl-button class="add-to-aidoku" x-data :href="$store.addUrl"
        >Add to Aidoku</sl-button
      >
    </header>
    <div class="description">
      On a device with Aidoku installed, tap
      <a class="description__anchor" x-data :href="$store.addUrl">Add to Aidoku</a>
      or use the base URL to add this source list.
    </div>
    <div class="base-url" variant="primary">
      <p class="base-url__title">Base URL:</p>
      <p class="base-url__url" x-data x-text="$store.sourceUrl"></p>
    </div>
    <div class="sources" x-data="sourceList">
      <h1 class="sources__title">Sources</h1>
      <template x-if="loading === LoadingStatus.Loading">
        <div class="sources__status">
          <div aria-label="Loading" class="spinner">
            <div class="bar0"></div>
            <div class="bar1"></div>
            <div class="bar2"></div>
            <div class="bar3"></div>
            <div class="bar4"></div>
            <div class="bar5"></div>
            <div class="bar6"></div>
            <div class="bar7"></div>
          </div>
        </div>
      </template>
      <template x-if="loading === LoadingStatus.Error">
        <div class="sources__status">
          Could not load sources. This source list might not work in Aidoku.
        </div>
      </template>
      <template x-if="loading === LoadingStatus.Loaded">
        <div>
          <div class="source-search" x-effect="updateFilteredList">
            <div class="source-search__nsfw-wrapper">
              <span class="source-search__nsfw-label">Show NSFW sources</span>
              <sl-radio-group 
                size="small"
                name="nsfw"
                value="all"
                @sl-change="nsfw = $event.target.value"
              >
                <sl-radio-button value="nsfw">Yes</sl-radio-button>
                <sl-radio-button value="safe">No</sl-radio-button>
                <sl-radio-button value="all">Don't care</sl-radio-button>
              </sl-radio-group>
            </div>
            
            <sl-input
              class="source-search__title"
              placeholder="Search by name or ID..."
              x-model="query"
            ></sl-input>
            <sl-select
              class="source-search__language"
              multiple
              clearable
              placeholder="Filter by languages"
              @sl-change="selectedLanguages = event.target.value"
            >
              <template x-for="(language, index) in languages" :key="index">
                <sl-option
                  :value="language"
                  x-text="languageName(language)"
                ></sl-option>
              </template>
            </sl-select>
          </div>
          <template x-for="source in filtered" :key="source.id">
            <div class="source" :id="source.id">
              <a :href="`#${source.id}`" class="source__anchor">#</a>
              <img
                class="source__icon"
                :alt="`Icon for ${source.name}`"
                :src="`./icons/${source.icon}`"
                loading="lazy"
                width="42"
                height="42"
              />
              <div class="source__info">
                <div class="source__name">
                  <span x-text="source.name"></span>
                  <span
                    class="source__version"
                    x-text="`v${source.version}`"
                  ></span>
                  <!--<sl-tag
                    x-cloak
                    size="small"
                    variant="warning"
                    class="content-rating content-rating--suggestive"
                    x-show="source.nsfw === 1">
                    16+
                  </sl-tag>-->
                  <sl-tag
                    x-cloak
                    size="small"
                    variant="danger"
                    class="content-rating content-rating--nsfw"
                    x-show="source.nsfw === 2">
                    18+
                  </sl-tag>
                </div>
                <div
                  class="source__version"
                  x-text="simpleLanguageName(source.lang)"
                ></div>
              </div>
              <sl-button
                pill
                size="small"
                download
                class="download-button"
                :href="`./sources/${source.file}`"
              >
                Download
              </sl-button>
            </div>
          </template>
        </div>
      </template>
    </div>
  <link rel="stylesheet" href="styles/index.css" />
  <script src="scripts/elements.js"></script>
  <script src="scripts/index.js"></script>
  </body>
</html>
